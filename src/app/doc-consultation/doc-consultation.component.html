<app-header></app-header>
<div class="container">
    <div class="row">
        <h1>Doctor consulation</h1>
    </div>
    <app-patient-header (outputPatientHeader)="patientHeader($event)"></app-patient-header>
    <div *ngIf="!headerDetail" class="margin-20t">
        <mat-tab-group>
            <mat-tab label="Doc Notes">
                <label for="prevHistory" class="form-label margin-20t">Previous History</label>

                <textarea readonly class="form-control " id="prevHistory" rows="10"
                    [(ngModel)]="currentPatientDetail.doctor_notes"></textarea>

                <ul class="pagination">
                    <li class="page-item" [ngClass]="{'disabled': recordIndex === 0 }">
                        <a class="page-link" (click)="prevItem()">Previous</a>
                    </li>
                    <li class="page-item"
                        [ngClass]="{'disabled': recordIndex === undefined || recordIndex === getLastRecordIndex() }">
                        <a class="page-link" (click)="nextItem()">Next</a>
                    </li>
                </ul>

                <label for="exampleFormControlTextarea1" class="form-label margin-20t">Doctor Notes</label>
                <textarea class="form-control" [(ngModel)]="docNotes" id="currentNotes" rows="10"></textarea>
                <button type="button" [disabled]="!docNotes" class="btn btn-primary margin-20t" (click)="saveNotes()">
                    Save
                </button>
            </mat-tab>
            <mat-tab label="Medicine">
                <app-med-prescription [headerDetail]="headerDetail"></app-med-prescription>    
            </mat-tab>
            <mat-tab label="Lab">
                <app-lab-prescription [headerDetail]="headerDetail"></app-lab-prescription>
            </mat-tab>
            <mat-tab label="Dialysis">
                <div class="error-container" *ngIf="!visit_no">Please save doctor notes to saave dialysis notes</div>
                
                <label for="prevDialysisHistory" class="form-label margin-20t">Previous History</label>

                <textarea readonly class="form-control " id="prevDialysisHistory" rows="10"
                [(ngModel)]="currentPatientDialysisDetail.dialysis_notes" ></textarea>
                <ul class="pagination">
                    <li class="page-item" [ngClass]="{'disabled': recordIndexDialysis === 0 }">
                        <a class="page-link" (click)="prevDialysisItem()">Previous</a>
                    </li>
                    <li class="page-item"
                        [ngClass]="{'disabled': recordIndexDialysis === undefined || recordIndexDialysis === getLastDialysisRecordIndex() }">
                        <a class="page-link" (click)="nextDialysisItem()">Next</a>
                    </li>
                </ul>

                <label for="exampleFormControlTextarea1" class="form-label margin-20t">Dialysis Notes</label>
                <textarea class="form-control" [(ngModel)]="dialysisNotes" id="dialysisNotes" rows="10"></textarea>
                <button type="button" [disabled]="!visit_no" class="btn btn-primary margin-20t"
                    (click)="saveDialysisNotes()">
                    Save
                </button>

            </mat-tab>
        </mat-tab-group>
    </div>
    
</div>